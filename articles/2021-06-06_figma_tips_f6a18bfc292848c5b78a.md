<!--
title:   Figmaで幅や高さを0にした要素を作っても内部的には0ではない
tags:    figma,tips
id:      f6a18bfc292848c5b78a
private: false
-->
## これは何

- Figmaを触っていてたまたま見つけた、ちょっと変わった（？）仕様について書いた記事です
- また、記事投稿イベント「[3000文字Tips - 知ると便利なTipsをみんなへ届けよう](https://qiita.com/official-events/d523df99d6479293ffa7)」への投稿記事でもあります

## そもそも「幅や高さを0にした要素」って？

Figmaでは`W`や`H`に`0`と打ち込んでも勝手に1になってしまいますが、`0.001`とでも打ち込めば`0`を実現できます[^1]

[^1]: おそらくですが、`0.006`より小さければ0になり`0.006`以上だと`0.01`に繰り上がります

![はじめに0を入力し、そのあと0.005を入力している動画](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/214677/56572171-ceb0-755a-3ee4-5405cda080e0.gif)

私はこれを利用して、Auto layout内でも一部はみ出したようなレイアウトのUIを作るときがあります。

:::note alert
2022年5月27日追記
以前はこれを利用してAuto layout内で絶対配置を実現していましたが、2022年5月11日のアップデートにより不要なテクニックとなりました。
この記事の内容自体は変わっていませんが、今となっては考慮せずとも良い内容と言えます。
詳細をこちらの記事をご覧ください。
https://qiita.com/xrxoxcxox/items/df8752598b4000a3b02d
:::

## 見かけ上は0だけど実は0ではない

先ほど作った四角形のデータ、Figma APIを使って見てみましょう。

![](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/214677/fd96acd8-bc10-98fb-1c38-2d8faa20ce3b.png)

`height`に注目してください。
GUI上では`0`と表示されていますし、要素同士の距離を測ってもちゃんと`0`として扱われていますが、内部的には`0.0010000000474974513`だそうです。

ちなみに先ほどの四角形の`H`に`0.001`と入れても`0.005`と入れても変わらず`0.0010000000474974513`でした。

なお、ご自分でも試してみたい場合は以下の書式でコマンドを叩けばOKです。

```shell
curl -H 'X-FIGMA-TOKEN: YOUR-FIGMA-TOKEN' 'https://api.figma.com/v1/files/FILE-KEY'
```

## 何が問題か？

こちらのファイルにアクセスしてみてください。

https://www.figma.com/file/qI0tjYR2C6DtPUeqDVz3lH/%E8%A6%8B%E3%81%8B%E3%81%91%E4%B8%8A0%E3%81%A0%E3%81%91%E3%81%A9%E5%AE%9F%E3%81%AF0%E3%81%98%E3%82%83%E3%81%AA%E3%81%84?node-id=0%3A1

謎の柄があると思いますが「Auto layoutを使って要素を並べて、かつ一部の要素だけをはみ出させたい」という意図があると想定してください。[^2]

[^2]: 実際はこんな謎のUIを作ることはないと思いますが、通知バッジとか、「SALE」「NEW」といったラベルはカードからはみ出してレイアウトさせたいこともあると思います。そんなイメージです。

上から3番目の移行の要素を選択すると、Y座標が`XXX.01`になっているのが分かると思います。
しかし、Auto layoutの設定にも各要素の値にも、どこにも小数点は使っていません。

色々試してみましたが、要素のサイズや位置によって変わるのか、`XXX.01`が出現する条件はバラバラな気がします。
5回6回と要素を繰り返してようやく`XXX.01`が出るときもあれば、今回作ったファイルでは3番目の要素から`XXX.01`になっています

## 対策

そもそもこんな使い方を多用している人があまりいないような気もしますが、今のところ実施している対策も記載します。
ただし非常に対症療法的なのでご容赦ください。

例として、高さ`0`のFrameを`5px`のpaddingのAuto layoutに入れ込むとします。

1. `H`を`0`とせず、`0.01`と逆に明示しておく
1. Auto layoutの上側か下側どちらかのpaddingを`5`ではなく`4.99`にしておく

すると両者で差し引き0となり、いくつ並べてもY座標に`XXX.01`が出なくなりました。[^3]

[^3]: 50個くらいの要素で試しただけなので、何百個も並べたら出てきてしまうのかもしれませんが……。