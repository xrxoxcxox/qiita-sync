<!--
title:   CSSのリファクタリングにあたって考えること
tags:    CSS,リファクタリング,QiitaEngineerFesta_設計
-->
## この記事の概要

ある箇所のCSSを変更したら、意図しない箇所にまで影響が及んでしまった経験はありませんか？
CSSを書いたことがある人ならほぼ全員が遭遇する事象だと思います。

そんなCSSを是正すべく、私がリファクタリングを行う際に気をつけていることを記事にしました。

## スタンス

### 今より良い見た目を作ろうと思わない

おそらく1番大事な点です。
CSSのリファクタリングが話題に上がる時点で、大なり小なり見た目も古めかしくなっているのでしょう。

ここはグッとこらえて「見た目は変えず、コードの作りを良くするだけ」に絞ってください。

「普通に考えて、リファクタリングの中にアップデートを入れるわけないじゃない」と思われる方もいるかもしれません。
しかし、何故か多くの人は「ここの色、もうちょっとこうしたいなあ」なんて触りだしてしまうのです。

どこかの見た目をアップデートしようものなら、いつの間にかUIリニューアルプロジェクトのような空気になってしまいます。
もう一度書きますが、グッとこらえて「見た目は変えず、コードの作りを良くするだけ」に絞ってください。

## テクニック

### 上の階層から触る

CSSとはCascading Style Sheetsの略です。
その名の通りスタイルをカスケーディングしているので、下の階層の要素ほど色々なオーバーライドの結果に成り立っています。
そのため、下の階層の要素を先に直しても、後から上の階層を触ると崩れてしまうかもしれません。

掃除をする場合、埃が上から下に落ちてくるので、高い場所からはじめて段々低い場所へ移っていきます。
似たようなイメージではないでしょうか。

例えば、以下のような構成だとします。

- html
  - head
  - body
    - div（全体のレイアウトを決めるwrapper）
      - header
      - main
      - aside
      - footer

この場合、いきなり`header`や`main`に手をつけず、`html`や`body`にかかっているスタイルに手を入れます。
reset.cssの類を導入している場合、全称セレクタによる`box-sizing`指定や`body`への`font-family`指定があるでしょうか。

歴史が積み重なった結果なのでしょうが、`body`にメインカラーであろう`color`を当てている……とかも見たことがあります。
こういうレイヤーから丁寧に処理します。

なお、お察しの通り上の階層のスタイルをいじるのでときにはページ全体が目も当てられないほど崩れます。
しかしそこで挫けてはいけません。
大きく崩れない要素≒下の階層の要素なので、先ほど記載したように後から上の階層の要素を触ったら結局崩れます。

---

最後まで読んでくださってありがとうございます！
Twitterでも情報を発信しているので、良かったらフォローお願いします！

https://twitter.com/xrxoxcxox
