<!--
title:   ダメなことはないけど避けた方が楽になるCSSの書き方
tags:    CSS,HTML,新人プログラマ応援
id:      42f9aa4edb3a9adec0e4
private: false
-->
## これはなに
- CSSでマージンをつける際、気をつけると後からちょっと楽になるかもしれないTips記事です
    - [記事を書くために使ったコードはここに置いてあります](https://github.com/xrxoxcxox/qiita-css-tips)

## このスタイルを組むとする

<img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/214677/fa8b89e4-b82d-e266-62ec-28a46521d0f2.png" alt=""/>


## ありそうなマークアップの例（若干はしょってる）

### 例1：各要素をフラットに書いている

```html
<h1>このページのタイトル</h1>

<h2>ちょっと強調したテキスト</h2>
<p>なにかしら文章が書いてある。以下はダミーテキスト。</p>
<p>吾輩は猫である。名前はまだ無い。どこで生れたかとんと見当がつかぬ。何でも薄暗いじめじめした所でニャーニャー泣いていた事だけは記憶している。</p>
<p>吾輩はここで始めて人間というものを見た。しかもあとで聞くとそれは書生という人間中で一番獰悪な種族であったそうだ。</p>
<p>この書生というのは時々我々を捕えて煮て食うという話である。しかしその当時は何という考もなかったから別段恐しいとも思わなかった。</p>

<h2>またもや強調したテキスト</h2>
<p>ただ彼の掌に載せられてスーと持ち上げられた時何だかフワフワした感じがあったばかりである。</p>
<p>掌の上で少し落ちついて書生の顔を見たのがいわゆる人間というものの見始であろう。この時妙なものだと思った感じが今でも残っている。</p>
<p>第一毛をもって装飾されべきはずの顔がつるつるしてまるで薬缶だ。その後猫にもだいぶ逢ったがこんな片輪には一度も出会わした事がない。のみならず顔の真中があまりに突起している。</p>
```

### 例2：タイトル以下のコンテンツを`div`でwrapしている

```html
<h1>このページのタイトル</h1>

<div>
  <h2>ちょっと強調したテキスト</h2>
  <p>なにかしら文章が書いてある。以下はダミーテキスト。</p>
  <p>吾輩は猫である。名前はまだ無い。どこで生れたかとんと見当がつかぬ。何でも薄暗いじめじめした所でニャーニャー泣いていた事だけは記憶している。</p>
  <p>吾輩はここで始めて人間というものを見た。しかもあとで聞くとそれは書生という人間中で一番獰悪な種族であったそうだ。</p>
  <p>この書生というのは時々我々を捕えて煮て食うという話である。しかしその当時は何という考もなかったから別段恐しいとも思わなかった。</p>

  <h2>またもや強調したテキスト</h2>
  <p>ただ彼の掌に載せられてスーと持ち上げられた時何だかフワフワした感じがあったばかりである。</p>
  <p>掌の上で少し落ちついて書生の顔を見たのがいわゆる人間というものの見始であろう。この時妙なものだと思った感じが今でも残っている。</p>
  <p>第一毛をもって装飾されべきはずの顔がつるつるしてまるで薬缶だ。その後猫にもだいぶ逢ったがこんな片輪には一度も出会わした事がない。のみならず顔の真中があまりに突起している。</p>
</div>
```

- 2つの例の違いは、タイトル以下の文章を`div`でwrapしているかそうでないかだけ
- 実際はループ処理やレスポンシブの都合などでもwrapする・しないは変わると思うので、どちらが良い悪いの話はしない

## 例1では問題ないけど、例2では避けた方が良いCSS

※記事を書く都合上タグセレクタで説明していますが、良い感じのクラスが定義されているつもりで読んでください

```css:bad.css
h2 {
  margin-top: 32px;
}
```

- 「2つの強調されているテキストの上には同じだけの余白があるから、それぞれにマージンをつけた」状態

## 逆に、例2において良いCSS

```css:good.css
div {
  margin-top: 32px;
}

h2:not(:first-of-type) {
  margin-top: 32px;
}
```

- 「wrapしているdivにmargin-topをつけたのと、2番目以降のh2にmargin-topをつけた」状態

## 違いは？

例2をdevツールで見てみましょう

| | bad.css | good.css |
| --- | --- | --- |
| sectionを選択している状態 | ![](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/214677/4e5b0637-6f31-aed0-daf0-a3b297988fe5.png) | ![](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/214677/9ca16e79-2283-f198-a7ef-25b5c1a9a088.png) |
| h2を選択している状態 | ![](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/214677/2083fd99-b5c5-17dc-7b19-c05eb6dd9079.png) | ![](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/214677/0238905c-0d4e-1d6c-1642-aa2dc77b37c6.png) |


- `bad.css`で起こっていること
    - `h2`と、wrapした`div`の間には間違いなく余白が存在する
    - しかし、`div`は**何も余白を示さない**
    - 1つ下の階層にある`h2`が、wrapした`div`を**突き抜けて**余白を生み出している
- `good.css`で起こっていること
    - `h2`と、wrapした`div`の間には`margin`が示されている
    - 1つ下の階層にある`h2`は`margin`をもたない

## つまり？

- 1箇所存在するくらいなら別に問題ない
    - レイアウト自体は正しくできる
- 複数箇所になると「何故か想定しているより余白が広い」とかが起きがち
    - そしてdevツールで発見しづらい
    - なぜなら、入れ子になっている要素まで見ていかないと視覚的に示されないから
- こういう要素に対してpositionで配置したりし始めると、色々なことが分かりづらくなる

## まとめ

- wrapした要素を突き抜けてしまうmargin指定は避けておきましょう
- 今はレイアウト上問題なくても、積もり積もった後にリファクタリングしないといけない場面が来ると大変になりがちです